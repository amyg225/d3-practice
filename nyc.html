<!-- https://github.com/dwillis/nyc-maps -->
<!-- https://github.com/mbostock/d3/wiki/Geo-Paths
 -->
<!DOCTYPE html>
<html>
<meta charset="utf-8">
<style>
  .district-0, .district-6, .district-12, .district-18, .district-24, .district-30, .district-36, .district-42, .district-48 { fill: #a93e5c; }
  .green { fill: green;}
  .district-label {
    fill: grey;
    fill-opacity: .8;
    font-size: 30px;
    font-weight: 700;
    text-anchor: middle;
  }
</style>
<body>
  <script src="http://d3js.org/d3.v3.min.js"></script>
<!--   <script src="http://d3js.org/topojson.v1.min.js"></script> -->
  <script>
    var width = 5000,
        height = 3000;

    var svg = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height);

    d3.json("city_council.geojson", function(error, city_council) {
      if (error) return console.error(error);
        console.log(city_council);

        //create geo.path object, set the projection to merator bring it to the svg-viewport
        var path = d3.geo.path()
            .projection(d3.geo.mercator()
            .center([-74.4, 40.9])
            .scale(300000)
            .translate([480, 350])
            .precision(0)
      );

      //draw svg lines of the boundries
      svg.append("g")
          .attr("class", "black")
          .selectAll("path")
          .data(city_council.features)
          .enter()
          .append("path")
          .attr("d", path)
          .attr("class", "district-boundary")
          .attr("class", function(d) {
            return "district-" + d.properties.CounDist;
          })
          .on('click', function(d) {
            d3.select(this).attr("class", 'green');
          });


      svg.selectAll(".subunit-label")
        .data(city_council.features)
      .enter()
      .append("text")
        .attr("class", function(d) { return "district-label " + d.properties.CounDist; })
        .attr("transform", function(d) { return "translate(" + path.centroid(d) + ")"; })
        .attr("dy", ".35em")
        .text(function(d) { return d.properties.CounDist;
      });

    });
  </script>
</body>
</html>